<HomeScreen>:
    name: 'ScreenManager'
    
    BoxLayout:
        orientation: 'horizontal'
        
        sm_main: sm_main
        sm: sm        
                
        ScreenManager:
            id: sm_main
            size_hint_x: 0.3
            
            Panel:
            
            Panel2:
            
        ScreenManager:
            id: sm
            size_hint_x: 0.7

            Screen:
                name: "screen0"
                BoxLayout:
                    orientation: 'vertical'
                    canvas:
                        Color:
                            rgb:1,1,1
                        Rectangle:
                            size:self.size
                            pos:self.pos
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint: 1, 0.3
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint:1,1
                            canvas:
                                Color:
                                    rgb:1,1,1
                                Rectangle:
                                    size:self.size
                                    pos:self.pos
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint:.2,1
                                Image:
                                    id: image
                                    size_hint: .5,.8
                                    size: 100, 100
                                    source:'logo-uaq-png-1.png'
                                    pos:0,0
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint:.3,1
                                Label:
                                    text: "Agrologistica" 
                                    color: 0,0,0,1
                                    pos:0,0
                                    bold: True
                                    font_size: 38
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint:.2,.9
                                Image:
                                    id: logoMLab
                                    size_hint: .2, 1
                                    size: .5, .50
                                    source:'diseño logo motuslab-1 fondo blanco png.png'
                                                                    
                    BoxLayout:
                        padding: 20
                        spacing: 30
                        orientation: 'vertical'
                        size_hint:.5, 0.8
                        Button:
                            text: "Analisis descriptivo"
                            pos_hint: {'x':0.5,'y':0.5}
                        Button:
                            text: "Analisis predictivo"
                            pos_hint: {'x':0.5,'y':0.5}
                    
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint:.5,.5
                            Button:
                                text: "Regresar"
                                pos_hint: {'x':3.25,'y':1}          
                   
            Screen1:
            
            Screen2:
            

<Panel>:
    name: "panel_main"
    
    label: label
    usuario: usuario
    
    BoxLayout:
        orientation: 'vertical'
        spacing: 30
        padding: 20
        canvas.before:
            Color:
                rgb: 1,1,1
            Rectangle:
                pos: self.pos
                size: self.size
                source: "corn.jpg"
                
        Image:
            id: usuario
            size_hint_y: 2
            size_hint_x: 1
            source: str(root.image_path)
                    
                
        Label:
            id: label
            size_hint_x: 1
            color: 0,0,0,1
            bold: True
            font_size: 18
            text: "¡Bienvenido "+str(root.user_name)+"!"
                
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Perfil de usuario"
            on_press:
                root.parent.parent.sm.current = 'screen1'
            background_color: 255, 255, 255, .1
        
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Bases de datos"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 255, 255, 255, .1
        
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Análisis"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 255, 255, 255, .1
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Salir"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1
                    
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "FAQ"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1
                        

        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Créditos"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1
                    

<Panel2>:
    name: "panel2"
    
    label: label
    usuario: usuario
    
    BoxLayout:
        orientation: 'vertical'
        spacing: 30
        padding: 20
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "corn.jpg"
                
        Image:
            id: usuario
            size_hint_y: 2
            size_hint_x: 1
            source: str(root.image_path)
                    
                
        Label:
            id: label
            size_hint_x: 1
            color: 0,0,0,1
            bold: True
            font_size: 18
            text: "¡Bienvenido "+str(root.user_name)+"!"
                
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Perfil de usuario"
            on_press:
                root.parent.parent.sm.current = 'screen1'
            background_color: 71, 104, 40, .1
        
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Bases de datos"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1
        
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Análisis"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Salir"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1
                    
        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "FAQ"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1

        Button:
            size_hint: 0.5, 0.5
            pos_hint: {'x':0.25,'y':0}
            text: "Créditos"
            on_press:
                root.parent.parent.sm.current = 'screen2'
            background_color: 71, 104, 40, .1

<Screen1>:
    name: "screen1"
    text_input: text_input
    image_sucess: image_sucess
    
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 20
        size_hint: 1, 1
        
        canvas:
            Color:
                rgb:1,1,1
            Rectangle:
                size:self.size
                pos:self.pos

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 0.2
            canvas:
                Color:
                    rgb:1,1,1
                Rectangle:
                    size:self.size
                    pos:self.pos
            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, 1                
                canvas:
                    Color:
                        rgb:1,1,1
                    Rectangle:
                        size:self.size
                        pos:self.pos                
                Image:
                    size_hint: 0.2, 1
                    size: 100, 100
                    source:'logo-uaq-png-1.png'
                    pos:0,0
                
                Label:
                    text: "Agrologistica" 
                    color: 0,0,0,1
                    size_hint: 0.6, 1
                    bold: True
                    font_size: 38
                                    
                Image:
                    size_hint: 0.2, 1
                    source:'diseño logo motuslab-1 fondo blanco png.png'

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 0.25
            
            Label:
                text: "Perfil de usuario"
                size_hint: 1, 0.2
                color: 0,0,0,1
                pos:0,0
                bold: True
                font_size: 20
            
            Label:
                text: "Aquí podrás modificar tu imagen de usuario y nombre. A continuación podrás ingresar un nuevo nombre y/o cargar una nueva imagen almacenada en tu dispositivo. Una vez que lo hayas hecho, da clic en APLICAR."
                text_size: self.size
                color: 0,0,0,1
                pos:0,0
                bold: True
            
        GridLayout:
            size_hint: 1, 0.55
            cols: 2
            spacing: 5
            
            Label:
                size_hint: 0.5, 0.15
                text: "Nuevo nombre"
                color: 0,0,0,1
                pos:0,0
                bold: True
            
            
            TextInput:
                id: text_input
                size_hint: 0.5, 0.15
                multiline: False
                text: 'Escribe tu nombre'
                
                
            Label:
                size_hint: 0.2, 0.15
                text: "Cambia tu imagen de usuario"
                color: 0,0,0,1
                pos:0,0
                bold: True
                    
            Button:
                size_hint: 0.2, 0.15
                text: 'Cargar nueva imagen'
                color: 1,1,1,1
                on_release: root.show_load()
            
            Label:
                size_hint: 0.2, 0.15
                text: "Estado de la imagen"
                pos:0,0
                bold: True
    
            Label:
                id: image_sucess
                size_hint: 0.2, 0.15
                text: root.load_success
                color: root.label_color
                pos:0,0
                bold: True
            
            Label:
                size_hint: 0.2, 0.55
                text: ""
                pos:0,0
                bold: True
            
            Label:
                size_hint: 0.2, 0.55
                text: ""
                pos:0,0
                bold: True
            
                
        Button:
            size_hint: 0.5, 0.1
            pos_hint: {'x':0.25, 'y':0}
            text: 'Aplicar'
            color: 1,1,1,1
            on_release:
                root.apply_changes() 
                root.parent.parent.sm_main.current = root.panel


<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        
        FileChooserListView:
            id: filechooser

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                color: 255,255,255,1
                on_release: root.cancel()
                

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)
            
                            
<Screen2>:
    name: "screen2"
    
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 20
        size_hint: 1, 1
        
        canvas:
            Color:
                rgb:1,1,1
            Rectangle:
                size:self.size
                pos:self.pos

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 0.2
            canvas:
                Color:
                    rgb:1,1,1
                Rectangle:
                    size:self.size
                    pos:self.pos
            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, 1                
                canvas:
                    Color:
                        rgb:1,1,1
                    Rectangle:
                        size:self.size
                        pos:self.pos                
                Image:
                    size_hint: 0.2, 1
                    size: 100, 100
                    source:'logo-uaq-png-1.png'
                    pos:0,0
                
                Label:
                    text: "Agrologistica" 
                    color: 0,0,0,1
                    size_hint: 0.6, 1
                    bold: True
                    font_size: 38
                                    
                Image:
                    size_hint: 0.2, 1
                    source:'diseño logo motuslab-1 fondo blanco png.png'

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 0.25
            
            Label:
                text: "Bases de datos"
                size_hint: 1, 0.2
                color: 0,0,0,1
                pos:0,0
                bold: True
                font_size: 20
            
            Label:
                text: "Aquí podrás obtener y descargar información de diversos mercados agrícolas y saber si la información que tienes está día.\n"
                text_size: self.size
                color: 0,0,0,1
                pos:0,0
                bold: True
            
        BoxLayout:
            size_hint: 1, .65
            orientation: 'vertical'
            spacing: 5
            
            Button: 
                size_hint: 0.5, 0.3
                pos_hint: {'center_x':0.5}
                text: "Obtener información"
                
            Button:
                size_hint: 0.5, 0.3 
                pos_hint: {'center_x':0.5}
                text: "Proporcionar información"
            
            Button: 
                size_hint: 0.5, 0.3
                pos_hint: {'center_x':0.5}
                text: "¿Mi información está al día?"
                
            Label:
                size_hint: 0.5, 0.3
                text: ""
